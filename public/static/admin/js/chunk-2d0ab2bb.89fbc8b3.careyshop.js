(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab2bb"],{"13ad":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cs-p"},[a("el-form",{attrs:{inline:!0,size:"small"}},[a("el-form-item",{directives:[{name:"permission",rawName:"v-permission",value:"/member/user/invoice/add",expression:"'/member/user/invoice/add'"}]},[a("el-button",{attrs:{icon:"el-icon-plus",disabled:e.loading},on:{click:e.handleCreate}},[e._v("新增信息")])],1),a("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:e.$route.path}})],1),a("el-table",{attrs:{data:e.currentTableData,"highlight-current-row":!0}},[a("el-table-column",{attrs:{label:"发票抬头",prop:"head","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"发票类型",prop:"type","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.typeMap[t.row.type])+" ")]}}])}),a("el-table-column",{attrs:{label:"开票内容",prop:"content",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.contentMap[t.row.content])+" ")]}}])}),a("el-table-column",{attrs:{label:"纳税人识别码",prop:"tax","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"开户银行",prop:"bank","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"开户账号",prop:"account","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"场所地址",prop:"address","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"固定电话",prop:"phone","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"收票邮箱",prop:"email","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",align:"center","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"/member/user/invoice/del",expression:"'/member/user/invoice/del'"}],attrs:{size:"small",type:"text"},on:{click:function(a){return e.handleDelete(t.$index)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{title:"创建信息",visible:e.dialogVisible,"append-to-body":!0,"close-on-click-modal":!1,width:"760px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.dialogForm,rules:e.getDialogRules(),"label-width":"110px"}},[a("el-form-item",{attrs:{label:"发票抬头",prop:"head"}},[a("el-input",{attrs:{placeholder:"请输入发票抬头",clearable:!0},model:{value:e.dialogForm.head,callback:function(t){e.$set(e.dialogForm,"head",t)},expression:"dialogForm.head"}})],1),a("el-form-item",{attrs:{label:"发票类型",prop:"type"}},[a("el-radio-group",{model:{value:e.dialogForm.type,callback:function(t){e.$set(e.dialogForm,"type",t)},expression:"dialogForm.type"}},e._l(e.typeMap,(function(t,l){return a("el-radio",{key:l,attrs:{label:l}},[e._v(e._s(t))])})),1)],1),a("el-form-item",{attrs:{label:"开票内容",prop:"content"}},[a("el-radio-group",{model:{value:e.dialogForm.content,callback:function(t){e.$set(e.dialogForm,"content",t)},expression:"dialogForm.content"}},e._l(e.contentMap,(function(t,l){return a("el-radio",{key:l,attrs:{label:l}},[e._v(e._s(t))])})),1)],1),"0"!==e.dialogForm.type?a("el-form-item",{attrs:{label:"纳税人识别码",prop:"tax"}},[a("el-input",{attrs:{placeholder:"请输入纳税人识别码",clearable:!0},model:{value:e.dialogForm.tax,callback:function(t){e.$set(e.dialogForm,"tax",t)},expression:"dialogForm.tax"}})],1):e._e(),"0"!==e.dialogForm.type?a("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[a("el-input",{attrs:{placeholder:"请输入开户银行",clearable:!0},model:{value:e.dialogForm.bank,callback:function(t){e.$set(e.dialogForm,"bank",t)},expression:"dialogForm.bank"}})],1):e._e(),"0"!==e.dialogForm.type?a("el-form-item",{attrs:{label:"开户账号",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入开户账号",clearable:!0},model:{value:e.dialogForm.account,callback:function(t){e.$set(e.dialogForm,"account",t)},expression:"dialogForm.account"}})],1):e._e(),"0"!==e.dialogForm.type?a("el-form-item",{attrs:{label:"场所地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入场所地址",clearable:!0},model:{value:e.dialogForm.address,callback:function(t){e.$set(e.dialogForm,"address",t)},expression:"dialogForm.address"}})],1):e._e(),"0"!==e.dialogForm.type?a("el-form-item",{attrs:{label:"固定电话",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入固定电话",clearable:!0},model:{value:e.dialogForm.phone,callback:function(t){e.$set(e.dialogForm,"phone",t)},expression:"dialogForm.phone"}})],1):e._e(),a("el-form-item",{attrs:{label:"收票邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入收票邮箱",clearable:!0},model:{value:e.dialogForm.email,callback:function(t){e.$set(e.dialogForm,"email",t)},expression:"dialogForm.email"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary",loading:e.dialogLoading,size:"small"},on:{click:e.create}},[e._v("确定")])],1)],1)],1)},o=[],r=(a("a434"),a("a729")),i={props:{loading:{default:!1},tableData:{default:function(){return[]}}},data:function(){return{typeMap:{0:"个人/非企业增值税普通发票",1:"企业增值税普通发票",2:"企业增值税专用发票"},contentMap:{0:"明细",1:"类别"},currentTableData:[],dialogForm:{},dialogLoading:!1,dialogVisible:!1}},watch:{tableData:{handler:function(e){this.currentTableData=e}}},methods:{getDialogRules:function(){var e=this,t={head:[{required:!0,message:"发票抬头不能为空",trigger:"blur"},{max:128,message:"发票抬头不能大于 128 个字符",trigger:"blur"}],type:[{required:!0,message:"发票类型不能为空",trigger:"change"}],content:[{required:!0,message:"开票内容不能为空",trigger:"change"}],email:[{required:!0,message:"收票邮箱不能为空",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"},{max:128,message:"收票邮箱不能大于 128 个字符",trigger:"blur"}]};return"0"!==this.dialogForm.type&&(t.tax=[{required:!0,message:"纳税人识别码不能为空",trigger:"blur"},{max:128,message:"纳税人识别码不能大于 128 个字符",trigger:"blur"}]),"2"===this.dialogForm.type&&(t.bank=[{required:!0,message:"开户银行不能为空",trigger:"blur"},{max:64,message:"开户银行不能大于 64 个字符",trigger:"blur"}],t.account=[{required:!0,message:"开户账号不能为空",trigger:"blur"},{max:64,message:"开户账号不能大于 64 个字符",trigger:"blur"}],t.address=[{required:!0,message:"场所地址不能为空",trigger:"blur"},{max:128,message:"场所地址不能大于 128 个字符",trigger:"blur"}],t.phone=[{required:!0,message:"固定电话不能为空",trigger:"blur"},{max:64,message:"固定电话不能大于 64 个字符",trigger:"blur"}]),this.$nextTick((function(){e.$refs.form&&e.$refs.form.clearValidate()})),t},handleDelete:function(e){var t=this;this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){Object(r["c"])(t.$route.params.client_id,[t.currentTableData[e].user_invoice_id]).then((function(){t.currentTableData.splice(e,1),t.$message.success("操作成功")}))})).catch((function(){}))},handleCreate:function(){var e=this,t=this.$route.params.client_id;Object(r["b"])(t).then((function(){e.dialogForm={client_id:t,type:"0",content:"1"},e.$nextTick((function(){e.$refs.form&&e.$refs.form.clearValidate(),e.dialogLoading=!1,e.dialogVisible=!0}))})).catch((function(){e.dialogVisible=!1}))},create:function(){var e=this;this.$refs.form.validate((function(t){t&&(e.dialogLoading=!0,Object(r["a"])(e.dialogForm).then((function(t){e.currentTableData.push(t.data),e.dialogVisible=!1,e.$message.success("操作成功")})).catch((function(){e.dialogLoading=!1})))}))}}},n=i,s=a("2877"),c=Object(s["a"])(n,l,o,!1,null,null,null);t["default"]=c.exports}}]);